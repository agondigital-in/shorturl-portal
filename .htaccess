RewriteEngine On

# Redirect short URLs to redirect.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([pP][0-9]+)$ redirect.php?p=$1 [L,QSA]

# Redirect root to login page
RewriteRule ^$ login.php [L]

# Custom error pages
ErrorDocument 404 /error.php